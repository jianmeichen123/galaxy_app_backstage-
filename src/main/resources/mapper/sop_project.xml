<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper  
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="com.galaxy.im.bean.project.ProjectBean">
	
	<!-- 获取项目list -->
	<select id="select" resultType="com.galaxy.im.bean.project.ProjectBean" parameterType="java.util.Map" resultMap="projectMap">
		SELECT id,project_name projectName FROM sop_project 
		WHERE project_status = 'projectStatus:0' 
		and project_progress='projectProgress:1'
		<if test="pName !=null and pName !='null' and pName !=''">
			and project_name like concat(concat('%','${pName}'),'%')
		</if>
		<if test="projectIdList != null">
			and id not in 
			<foreach collection="projectIdList" item="pid" index="index" open="(" close=")" separator=",">
				#{pid}
			</foreach>
		</if>
		<if test="offset != null and limit != null">
			limit #{offset}, #{limit};
		</if>
	</select>
	<resultMap type="com.galaxy.im.bean.project.ProjectBean" id="projectMap">
		<result column="id" property="id"/>
		<result column="project_name" property="projectName"/>
	</resultMap>
	
	<!-- 项目list总数 -->
	<select id="selectCount" resultType="java.lang.Long"
		parameterType="java.util.Map">
		select count(id) from sop_project
		WHERE project_status = 'projectStatus:0' 
		and project_progress='projectProgress:1'
		<if test="pName !=null and pName !='null' and pName !=''">
			and project_name like concat(concat('%','${pName}'),'%')
		</if>
		<if test="projectIdList != null">
			and id not in 
			<foreach collection="projectIdList" item="pid" index="index" open="(" close=");" separator=",">
				#{pid}
			</foreach>
		</if>
	</select>
	

</mapper>